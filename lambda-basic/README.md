# ワーク: AWS Lambda 関数を作成してテスト実行してみよう

## 手順

1. AWS マネジメントコンソールを使用してワーク環境にサインインして下さい。

1. AWS マネジメントコンソールで、ページ上部の検索窓で `lambda` と入力し、表示されるメニューから **AWS Lambda** の部分をクリックして下さい。  

1. AWS Lambda のページで、左側のメニューから **関数** をクリックして下さい。

1. Lambda 関数を作成します。
   - [**関数の作成**] をクリック
   - 関数名: `work-function`
   - ランタイム: **Python 3.13**
      - [**関数の作成**] をクリック
1. Lambda 関数のコードを作成します。
   - コード: このフォルダにある lambda_function.py の内容に置換える
      - コード変更後は [**Deploy**] をクリック
1. Lambda 関数の環境変数を設定します。
   - [**設定**] タブをクリック
   - 左側メニューより[**環境変数**] をクリック
   - [**編集**] をクリック
   - [**環境変数の追加**] をクリック
   - [**キー**] に `MSG` 、[**値**] に `Hello!` を入力
   - [**保存**] をクリック
1. Lambda 関数のテストを行ないます。
   - [**テスト**] タブをクリック
   - イベント JSON: 下記の内容に置換える
     ```
     {
        "name": "Alex"
     }
     ```
   - [**テスト**] をクリック
   - 緑色の [**実行中の関数: 成功 (ログ)**] が表示されることを確認
   - [**詳細**]をクリックして展開表示
   - 下記が表示されていることを確認
     ```
     {
       "statusCode": 200,
       "body": "Hello! Alex"
     }
     ```
  - [**ログ出力**] セクションを確認
  - その後、数回 [**テスト**] をクリック。
    - テスト実行する毎に、[**ログ出力**] の [**outside_handler**] と [**inside_handler**] の値がどうなるかを確認
---
1. Amazon API Gateway と統合します。
   - **このワークでは、シンプルに Lambda 関数を呼び出すためだけの API にするため、RESTful な設計にはしません。**
   - **コード** タブをクリック
   - return 文を下記のように変更
   - ```
     # API Gateway と統合するために return の内容を変更する 
     return {
        "statusCode": 200,
        "body": json.dumps({"message": "Hello from Lambda"})
     }
     ```
   - [**Deploy**] をクリック
   - **概要** セクションで **トリガーを追加** をクリック
   - **トリガーの設定** で **API Gateway** をクリック
   - **インテント** で **新規 API を作成** をクリック
   - **API タイプ** で **REST API** をクリック
   - **セキュリティ** で **オープン** をクリック
   - **追加** をクリック
   - **トリガー** セクションに表示されている **API エンドポイント** の URL にアクセス
   - **{"message": "Hello from Lambda"}** と表示されることを確認
---

* lambda_function.py
  - Lambda 関数のコード







